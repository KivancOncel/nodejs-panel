<%- include('../../layouts/head.ejs') %>
</head>
<body>
    <div class="wrapper">
        <%- include('../../layouts/topbar.ejs') %>
        <%- include('../../layouts/navigation.ejs') %>
        <div class="content-page">
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h4 class="header-title">Menu List Table</h4>
                                    <a class="btn btn-primary" href="/admin/menu/menu-add">Add Menu</a>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive-sm">
                                        <table class="table table-striped table-centered mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Title</th>
                                                    <th>URL</th>
                                                    <th>Order</th>
                                                    <th>Group</th>
                                                    <th>Parent</th>
                                                    <th>Settings</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% menus.forEach(function(menu) { %>
                                                    <tr>
                                                        <td><%= menu.title %></td>
                                                        <td><%= menu.url %></td>
                                                        <td><%= menu.order %></td>
                                                        <td><%= menu.group %></td>
                                                        <td>
                                                            <% 
                                                                var parentMenu = menus.find(m => m._id.toString() === menu.parent?.toString());
                                                                if(parentMenu) { %>
                                                                    <%= parentMenu.title %>
                                                            <% } else { %>
                                                                    Ana Menü
                                                            <% } %>
                                                        </td>
                                                        <td>
                                                            <a href="/admin/menu/menu-edit/<%= menu._id %>" class="btn btn-sm btn-warning">Edit</a>
                                                            <a href="/admin/menu/menu-delete/<%= menu._id %>" class="btn btn-sm btn-danger" onclick="return confirm('Silmek istediğinize emin misiniz?')">Delete</a>
                                                        </td>
                                                    </tr>
                                                <% }) %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <%- include('../../layouts/end.ejs') %>
    </div>
</body>